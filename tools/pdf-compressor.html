<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Compressor | Toolgenix</title>
    <meta name="description" content="Free online PDF compressor. Reduce PDF file size without losing quality. Works entirely in your browser - no data is uploaded to servers.">
    <meta name="keywords" content="pdf compressor, pdf compression, reduce pdf size, pdf optimizer, toolgenix">
    <meta name="author" content="Toolgenix">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="PDF Compressor | Toolgenix">
    <meta property="og:description" content="Free online PDF compressor. Reduce PDF file size without losing quality.">
    <meta property="og:type" content="website">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://toolgenix.com/tools/pdf-compressor">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "PDF Compressor - Toolgenix",
      "description": "Free online tool to compress PDF files and reduce their size",
      "url": "https://toolgenix.com/tools/pdf-compressor",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "permissions": "browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    
    <!-- PDF.js (rendering) and PDF-Lib (rebuilding) -->
    <script src="https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.24.1/dist/pdf-lib.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #7A5CFA;
            --primary-light: #8A63FF;
            --primary-dark: #6A4EDC;
            --background: #ffffff;
            --card-bg: #f8f8f8;
            --text: #1e1e2f;
            --text-secondary: #2e2e3f;
            --border: #e5e5e5;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #ff4c4c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        /* Header Styles */
        header {
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 2px 10px rgba(122, 92, 250, 0.15);
            padding: 0.8rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo {
            font-size: 1.6rem;
            font-weight: 800;
            display: flex;
        }
        
        .logo span:first-child {
            color: #1e1e2f;
        }
        
        .logo span:last-child {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.9rem;
            transition: color 0.3s;
        }
        
        nav a:hover {
            color: var(--primary);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .page-header {
            text-align: center;
            padding: 3rem 0 2rem;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: var(--text);
        }
        
        .page-header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Tool Container */
        .tool-container {
            max-width: 1000px;
            width: 100%;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(122, 92, 250, 0.1);
            margin: 0 auto 3rem;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .tool-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
        }

        .tool-header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .tool-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .tool-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .calculator-form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        .setting-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }

        .input-with-icon {
            position: relative;
        }

        .input-with-icon i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
        }

        .input-with-icon input,
        .input-with-icon select {
            padding-left: 35px;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background-color: white;
            color: var(--text);
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }

        button {
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 10px rgba(122, 92, 250, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(122, 92, 250, 0.4);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .primary-btn {
            flex: 1;
        }

        .secondary-btn {
            background-color: white;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .secondary-btn:hover {
            background-color: #f5f5f5;
        }

        .small-btn {
            padding: 10px 12px;
            font-size: 14px;
        }

        /* File Upload */
        .file-upload {
            position: relative;
            margin-bottom: 20px;
        }

        .file-upload input[type="file"] {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            border: 2px dashed var(--border);
            border-radius: 8px;
            background-color: rgba(122, 92, 250, 0.05);
            transition: all 0.3s;
            text-align: center;
        }

        .file-upload-label:hover {
            border-color: var(--primary);
            background-color: rgba(122, 92, 250, 0.08);
        }

        .file-upload-label i {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .file-upload-label h3 {
            margin-bottom: 10px;
            color: var(--text);
        }

        .file-upload-label p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Progress Bar */
        .progress-container {
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e5e5e5;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            width: 0%;
            transition: width 0.3s;
        }

        .status-text {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Results Panel */
        .result-panel {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            display: none;
        }

        .result-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .reduction-stat {
            color: var(--success);
        }

        /* Preview Section */
        .preview-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .preview-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text);
            text-align: center;
        }

        .preview-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .canvas-preview {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            width: 100%;
            max-width: 300px;
        }

        .preview-info {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
        }

        .note {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(255, 152, 0, 0.05);
            border-radius: 8px;
            border-left: 4px solid var(--warning);
        }

        /* Info Sections */
        .info-section {
            margin: 3rem 0;
            padding: 2rem;
            background-color: var(--card-bg);
            border-radius: 12px;
        }
        
        .info-section h2 {
            color: var(--text);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        
        .info-section h3 {
            color: var(--primary);
            margin: 1.5rem 0 1rem;
            font-size: 1.4rem;
        }
        
        .info-section p, .info-section li {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .info-section ul, .info-section ol {
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .info-section li {
            margin-bottom: 0.5rem;
        }
        
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .benefit-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .benefit-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .benefit-card h4 {
            color: var(--text);
            margin-bottom: 0.5rem;
        }
        
        /* FAQ Section */
        .faq-item {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1.5rem;
        }
        
        .faq-question {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        /* Footer */
        footer {
            background-color: var(--background);
            border-top: 2px solid var(--primary);
            padding: 2rem 5% 1rem;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-bottom: 1.2rem;
        }
        
        .footer-column h3 {
            font-size: 1rem;
            margin-bottom: 1rem;
            color: var(--text);
        }
        
        .footer-column p {
            color: var(--text-secondary);
            line-height: 1.4;
            font-size: 0.85rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.5rem;
        }
        
        .footer-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 0.85rem;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        .social-icons {
            display: flex;
            gap: 0.7rem;
        }
        
        .social-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .social-icon:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(122, 92, 250, 0.15);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 1.2rem;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.8rem;
        }
        
        /* Breadcrumb */
        .breadcrumb {
            padding: 1rem 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }
        
        @media (max-width: 992px) {
            .footer-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            nav ul {
                display: none;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 2rem;
            }
            
            .info-section {
                padding: 1.5rem;
            }
            
            .benefits-grid {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        @media (max-width: 600px) {
            .tool-container { 
                padding: 20px; 
            }
            
            .page-header h1 { 
                font-size: 1.8rem; 
            }
            
            .page-header p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <span>TOOL</span><span>GENIX</span>
        </div>
        <nav>
            <ul>
                <li><a href="https://toolgenix.com">Home</a></li>
                <li><a href="https://toolgenix.com/categories">Categories</a></li>
                <li><a href="https://toolgenix.com/tools">Tools</a></li>
                <li><a href="https://toolgenix.com/blog">Blog</a></li>
                <li><a href="https://toolgenix.com/join">Join</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="https://toolgenix.com">Home</a> &gt; 
            <a href="https://toolgenix.com/tools">Tools</a> &gt; 
            <a href="https://toolgenix.com/tools/pdf-tools">PDF Tools</a> &gt; 
            PDF Compressor
        </div>
        
        <!-- Page Header -->
        <section class="page-header">
            <h1>PDF Compressor</h1>
            <p>Reduce PDF file size without losing quality. Works entirely in your browser - no data is uploaded to servers.</p>
        </section>
        
        <!-- PDF Compressor Tool -->
        <section class="tool-container">
            <div class="tool-header">
                <h2>PDF Compressor</h2>
                <p>Compress PDF files by optimizing images and reducing resolution</p>
            </div>

            <div class="calculator-form">
                <div class="form-group">
                    <label class="setting-label">Upload PDF File</label>
                    <div class="file-upload">
                        <input type="file" id="pdfFile" accept="application/pdf">
                        <div class="file-upload-label">
                            <i class="fas fa-file-pdf"></i>
                            <h3>Select PDF File</h3>
                            <p>Click to browse or drag and drop your PDF file here</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="setting-label" for="quality">Compression Quality</label>
                    <div class="input-with-icon">
                        <i class="fas fa-compress"></i>
                        <select id="quality">
                            <option value="0.85">High (best quality)</option>
                            <option value="0.65" selected>Medium (balanced)</option>
                            <option value="0.45">Low (maximum compression)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="setting-label" for="renderWidth">Render Resolution (DPI equivalency)</label>
                    <div class="input-with-icon">
                        <i class="fas fa-ruler"></i>
                        <input type="number" id="renderWidth" value="1200" min="200" max="2500">
                    </div>
                    <p class="note" style="margin-top: 8px; font-size: 14px;">
                        Higher resolution → better quality & larger output, lower resolution → smaller output
                    </p>
                </div>

                <div class="button-group">
                    <button class="primary-btn" id="compressBtn">
                        <i class="fas fa-compress"></i>
                        Compress PDF
                    </button>
                    <button class="secondary-btn" id="previewBtn">
                        <i class="fas fa-eye"></i>
                        Preview First Page
                    </button>
                    <button class="secondary-btn" id="clearBtn">
                        <i class="fas fa-trash"></i>
                        Clear
                    </button>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar"></div>
                    </div>
                    <div class="status-text" id="statusText">No file uploaded</div>
                </div>
            </div>

            <!-- Results Panel -->
            <div class="result-panel" id="resultPanel">
                <div class="result-title">Compression Results</div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="origSize">—</div>
                        <div class="stat-label">Original Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="newSize">—</div>
                        <div class="stat-label">Compressed Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value reduction-stat" id="reduction">—</div>
                        <div class="stat-label">Size Reduction</div>
                    </div>
                </div>
                <div class="button-group">
                    <a id="downloadLink" class="primary-btn" style="text-decoration: none; color: inherit; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-download"></i>
                        Download Compressed PDF
                    </a>
                    <button class="secondary-btn" id="openNewBtn">
                        <i class="fas fa-external-link-alt"></i>
                        Open in New Tab
                    </button>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="preview-container">
                <div class="preview-title">PDF Preview (First Page)</div>
                <div class="preview-box">
                    <div class="canvas-preview" id="canvasPreview">
                        <div class="preview-info">
                            <i class="fas fa-file-pdf" style="font-size: 48px; margin-bottom: 10px; opacity: 0.5;"></i>
                            <p>Preview will appear here</p>
                        </div>
                    </div>
                    <div class="preview-info" id="pageInfo">No file loaded</div>
                </div>
            </div>

            <div class="note">
                <i class="fas fa-exclamation-triangle"></i> 
                Note: This PDF compressor works entirely in your browser. No data is sent to any server, ensuring your documents remain private. For very large PDFs, compression may take some time.
            </div>
        </section>
        
        <!-- How to Use Section -->
        <section class="info-section">
            <h2>How to Use Our PDF Compressor</h2>
            <ol>
                <li><strong>Upload PDF</strong> - Click the upload area or drag and drop your PDF file.</li>
                <li><strong>Adjust settings</strong> - Select compression quality and resolution based on your needs.</li>
                <li><strong>Preview</strong> - Click "Preview First Page" to see how your PDF will look after compression.</li>
                <li><strong>Compress</strong> - Click "Compress PDF" to process your file.</li>
                <li><strong>Download</strong> - Once compression is complete, download your optimized PDF.</li>
            </ol>
            
            <h3>Compression Settings Explained</h3>
            <ul>
                <li><strong>High Quality</strong> - Minimal compression, best for documents requiring high fidelity.</li>
                <li><strong>Medium Quality</strong> - Balanced compression, good for most documents with images.</li>
                <li><strong>Low Quality</strong> - Maximum compression, ideal for documents with many images where file size is critical.</li>
                <li><strong>Render Resolution</strong> - Controls the DPI (dots per inch) equivalent for rendering pages. Higher values preserve more detail but result in larger files.</li>
            </ul>
            
            <h3>Why Compress PDF Files?</h3>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <i class="fas fa-envelope"></i>
                    <h4>Email Attachments</h4>
                    <p>Reduce file size to meet email attachment limits.</p>
                </div>
                <div class="benefit-card">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h4>Faster Uploads</h4>
                    <p>Upload compressed files more quickly to websites and cloud storage.</p>
                </div>
                <div class="benefit-card">
                    <i class="fas fa-mobile-alt"></i>
                    <h4>Mobile Friendly</h4>
                    <p>Make PDFs easier to view and share on mobile devices.</p>
                </div>
                <div class="benefit-card">
                    <i class="fas fa-hdd"></i>
                    <h4>Save Storage</h4>
                    <p>Reduce storage space used by PDF documents.</p>
                </div>
            </div>
        </section>
        
        <!-- Understanding PDF Compression Section -->
        <section class="info-section">
            <h2>Understanding PDF Compression</h2>
            
            <h3>How PDF Compression Works</h3>
            <p>PDF compression works by reducing the file size of a PDF document without significantly affecting its visual quality. This is achieved through several techniques:</p>
            <ul>
                <li><strong>Image Downsampling</strong> - Reducing the resolution of images in the PDF</li>
                <li><strong>Image Recompression</strong> - Applying more efficient compression algorithms to images</li>
                <li><strong>Font Subsetting</strong> - Including only the characters actually used in the document</li>
                <li><strong>Object Optimization</strong> - Removing redundant or unnecessary elements from the PDF structure</li>
            </ul>
            
            <h3>Types of PDF Compression</h3>
            <ul>
                <li><strong>Lossless Compression</strong> - Reduces file size without any loss of quality. Best for text documents.</li>
                <li><strong>Lossy Compression</strong> - Reduces file size by discarding some data, which may affect quality. Best for image-heavy documents.</li>
            </ul>
            
            <h3>When to Use PDF Compression</h3>
            <ul>
                <li>When you need to email a PDF but it exceeds attachment size limits</li>
                <li>When uploading PDFs to websites with file size restrictions</li>
                <li>When storing large numbers of PDFs to save disk space</li>
                <li>When sharing PDFs over slow internet connections</li>
                <li>When optimizing PDFs for web viewing</li>
            </ul>
            
            <h3>Best Practices for PDF Compression</h3>
            <ul>
                <li>Always preview the compressed PDF before finalizing</li>
                <li>Use higher quality settings for documents with important visual details</li>
                <li>For text-only documents, use lossless compression when available</li>
                <li>Keep a backup of the original file before compression</li>
                <li>Test the compressed PDF on different devices to ensure readability</li>
            </ul>
        </section>
        
        <!-- FAQ Section -->
        <section class="info-section">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question">Is PDF compression safe?</div>
                <p>Yes, our PDF compression is completely safe. All processing happens in your browser - your files never leave your computer or are uploaded to any server. This ensures complete privacy and security for your documents.</p>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How much can I reduce my PDF file size?</div>
                <p>The amount of compression depends on the content of your PDF. Image-heavy documents can often be reduced by 50-80%, while text-only documents may see smaller reductions of 10-30%.</p>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Will compression affect the quality of my PDF?</div>
                <p>With the "High Quality" setting, visual quality loss is minimal. With "Medium Quality", there may be slight quality reduction that's usually unnoticeable. "Low Quality" may result in more noticeable quality loss, particularly for images.</p>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Can I compress password-protected PDFs?</div>
                <p>No, our tool cannot process password-protected PDFs. You would need to remove the password before compression.</p>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">What is the maximum file size I can compress?</div>
                <p>There's no fixed limit, but very large files (over 100MB) may take a long time to process or could exceed browser memory limits. For best results, we recommend files under 50MB.</p>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Does compression affect text searchability?</div>
                <p>No, text remains searchable and selectable after compression. Our method preserves the text layers in your PDF.</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>About Toolgenix</h3>
                    <p>Toolgenix provides free, easy-to-use online tools to simplify your digital life. Our mission is to make everyday tasks faster and more efficient.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="https://toolgenix.com">Home</a></li>
                        <li><a href="https://toolgenix.com/categories">Categories</a></li>
                        <li><a href="https://toolgenix.com/blog">Blog</a></li>
                        <li><a href="https://toolgenix.com/tools">Tools</a></li>
                        <li><a href="https://toolgenix.com/join">Join</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect With Us</h3>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Toolgenix — All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Setup PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js';

        // DOM Elements
        const pdfFileInput = document.getElementById('pdfFile');
        const compressBtn = document.getElementById('compressBtn');
        const previewBtn = document.getElementById('previewBtn');
        const clearBtn = document.getElementById('clearBtn');
        const statusText = document.getElementById('statusText');
        const progressBar = document.getElementById('progressBar');
        const resultPanel = document.getElementById('resultPanel');
        const origSizeEl = document.getElementById('origSize');
        const newSizeEl = document.getElementById('newSize');
        const reductionEl = document.getElementById('reduction');
        const downloadLink = document.getElementById('downloadLink');
        const openNewBtn = document.getElementById('openNewBtn');
        const canvasPreview = document.getElementById('canvasPreview');
        const pageInfo = document.getElementById('pageInfo');
        const qualitySelect = document.getElementById('quality');
        const renderWidthInput = document.getElementById('renderWidth');
        const fileUploadLabel = document.querySelector('.file-upload-label');

        let originalFile = null;
        let compressedPdfBytes = null;

        // Helper Functions
        function humanBytes(bytes) {
            if (bytes === 0) return '0 B';
            const units = ['B', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + units[i];
        }

        function setStatus(text) {
            statusText.textContent = text;
        }

        function setProgress(percent) {
            progressBar.style.width = (percent * 100) + '%';
        }

        function showMessage(text, isError = false) {
            // Create a temporary message element
            const messageEl = document.createElement('div');
            messageEl.textContent = text;
            messageEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                background: ${isError ? 'var(--error)' : 'var(--success)'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-weight: 500;
                animation: fadeIn 0.3s ease;
            `;
            document.body.appendChild(messageEl);
            
            // Remove after 3 seconds
            setTimeout(() => {
                messageEl.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.parentNode.removeChild(messageEl);
                    }
                }, 300);
            }, 3000);
        }

        // Preview first page
        async function previewFirstPage(arrayBuffer, targetWidth, jpegQuality) {
            setStatus('Rendering preview...');
            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });
            const pdf = await loadingTask.promise;
            const page = await pdf.getPage(1);
            const viewport = page.getViewport({ scale: 1 });
            
            // Compute scale to achieve target width
            const scale = targetWidth / viewport.width;
            const renderViewport = page.getViewport({ scale });
            const canvas = document.createElement('canvas');
            canvas.width = Math.round(renderViewport.width);
            canvas.height = Math.round(renderViewport.height);
            const ctx = canvas.getContext('2d');
            
            await page.render({ canvasContext: ctx, viewport: renderViewport }).promise;

            // Show in preview area
            canvasPreview.innerHTML = '';
            const img = document.createElement('img');
            img.src = canvas.toDataURL('image/jpeg', jpegQuality);
            img.style.maxWidth = '100%';
            img.style.height = 'auto';
            canvasPreview.appendChild(img);

            pageInfo.textContent = `Page 1 of ${pdf.numPages}`;
            await pdf.cleanup();
            return canvas;
        }

        // Core compression function
        async function compressPdf(arrayBuffer, options = { quality: 0.65, targetWidth: 1200 }, onProgress = () => {}) {
            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });
            const pdf = await loadingTask.promise;
            const numPages = pdf.numPages;
            const newPdfDoc = await PDFLib.PDFDocument.create();

            for (let i = 1; i <= numPages; i++) {
                // Progress callback
                onProgress({ page: i, total: numPages, percent: (i - 1) / numPages });

                const page = await pdf.getPage(i);
                const viewport = page.getViewport({ scale: 1 });
                const scale = options.targetWidth / viewport.width;
                const renderViewport = page.getViewport({ scale });

                // Render to canvas
                const canvas = document.createElement('canvas');
                canvas.width = Math.round(renderViewport.width);
                canvas.height = Math.round(renderViewport.height);
                const ctx = canvas.getContext('2d');

                await page.render({ canvasContext: ctx, viewport: renderViewport }).promise;

                // Convert canvas to JPEG
                const dataUrl = canvas.toDataURL('image/jpeg', options.quality);
                const jpgImage = await newPdfDoc.embedJpg(dataUrl);
                
                // Create page in new PDF
                const pxToPt = 72 / 96;
                const pageWidthPts = canvas.width * pxToPt;
                const pageHeightPts = canvas.height * pxToPt;
                const newPage = newPdfDoc.addPage([pageWidthPts, pageHeightPts]);
                newPage.drawImage(jpgImage, {
                    x: 0,
                    y: 0,
                    width: pageWidthPts,
                    height: pageHeightPts,
                });

                // Free canvas
                canvas.width = 0;
                canvas.height = 0;
            }

            onProgress({ page: numPages, total: numPages, percent: 1 });

            const pdfBytes = await newPdfDoc.save();
            await pdf.cleanup();
            return pdfBytes;
        }

        // UI Event Handlers
        pdfFileInput.addEventListener('change', (ev) => {
            resultPanel.classList.remove('active');
            compressedPdfBytes = null;
            
            if (!ev.target.files || ev.target.files.length === 0) {
                originalFile = null;
                setStatus('No file selected');
                fileUploadLabel.innerHTML = `
                    <i class="fas fa-file-pdf"></i>
                    <h3>Select PDF File</h3>
                    <p>Click to browse or drag and drop your PDF file here</p>
                `;
                return;
            }
            
            const file = ev.target.files[0];
            if (file.type !== 'application/pdf' && !file.name.toLowerCase().endsWith('.pdf')) {
                showMessage('Please upload a PDF file.', true);
                pdfFileInput.value = '';
                originalFile = null;
                setStatus('Invalid file');
                return;
            }
            
            originalFile = file;
            setStatus(`Loaded: ${file.name} (${humanBytes(file.size)})`);
            origSizeEl.textContent = humanBytes(file.size);
            setProgress(0);
            
            // Update file upload label
            fileUploadLabel.innerHTML = `
                <i class="fas fa-check-circle" style="color: var(--success);"></i>
                <h3>${file.name}</h3>
                <p>${humanBytes(file.size)} • Ready to compress</p>
            `;
        });

        // Drag and drop support
        fileUploadLabel.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUploadLabel.style.borderColor = 'var(--primary)';
            fileUploadLabel.style.backgroundColor = 'rgba(122, 92, 250, 0.1)';
        });

        fileUploadLabel.addEventListener('dragleave', (e) => {
            e.preventDefault();
            fileUploadLabel.style.borderColor = 'var(--border)';
            fileUploadLabel.style.backgroundColor = 'rgba(122, 92, 250, 0.05)';
        });

        fileUploadLabel.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUploadLabel.style.borderColor = 'var(--border)';
            fileUploadLabel.style.backgroundColor = 'rgba(122, 92, 250, 0.05)';
            
            if (e.dataTransfer.files.length) {
                pdfFileInput.files = e.dataTransfer.files;
                const event = new Event('change', { bubbles: true });
                pdfFileInput.dispatchEvent(event);
            }
        });

        previewBtn.addEventListener('click', async () => {
            if (!originalFile) {
                showMessage('Please upload a PDF file first.', true);
                return;
            }
            
            setProgress(0);
            setStatus('Preparing preview...');
            const ab = await originalFile.arrayBuffer();
            const quality = parseFloat(qualitySelect.value);
            const targetWidth = parseInt(renderWidthInput.value) || 1200;
            
            try {
                await previewFirstPage(ab, targetWidth, quality);
                setStatus('Preview ready');
                setProgress(1);
                showMessage('Preview generated successfully!');
            } catch (err) {
                console.error(err);
                showMessage('Preview failed. Please try again.', true);
                setStatus('Preview failed');
            }
        });

        compressBtn.addEventListener('click', async () => {
            if (!originalFile) {
                showMessage('Please upload a PDF file first.', true);
                return;
            }
            
            compressBtn.disabled = true;
            previewBtn.disabled = true;
            clearBtn.disabled = true;
            setStatus('Reading file...');
            setProgress(0);
            resultPanel.classList.remove('active');
            compressedPdfBytes = null;

            const ab = await originalFile.arrayBuffer();
            const quality = parseFloat(qualitySelect.value);
            const targetWidth = parseInt(renderWidthInput.value) || 1200;

            try {
                setStatus('Compressing — this may take a while for large PDFs...');
                const start = performance.now();
                const newBytes = await compressPdf(ab, { quality, targetWidth }, ({ page, total, percent }) => {
                    setProgress(percent);
                    setStatus(`Processing page ${page} of ${total}...`);
                });
                const end = performance.now();
                compressedPdfBytes = newBytes;
                setStatus(`Done in ${((end - start) / 1000).toFixed(1)}s`);
                setProgress(1);

                // Show preview of compressed PDF
                try {
                    const compressedAb = newBytes.buffer ? newBytes.buffer : newBytes;
                    await previewFirstPage(compressedAb, targetWidth, quality);
                } catch (e) {
                    console.warn('Preview of compressed PDF failed', e);
                }

                // Show sizes and download link
                const origSize = originalFile.size;
                const newSize = compressedPdfBytes.length;
                origSizeEl.textContent = humanBytes(origSize);
                newSizeEl.textContent = humanBytes(newSize);
                const red = ((origSize - newSize) / origSize) * 100;
                reductionEl.textContent = (red >= 0 ? red.toFixed(2) + '%' : 'N/A');

                // Create blob & link
                const blob = new Blob([compressedPdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                downloadLink.href = url;
                downloadLink.download = (originalFile.name.replace(/\.pdf$/i, '') || 'compressed') + '-compressed.pdf';
                downloadLink.onclick = () => {
                    showMessage('PDF downloaded successfully!');
                };
                openNewBtn.onclick = () => {
                    window.open(url, '_blank');
                };
                resultPanel.classList.add('active');
                showMessage('PDF compressed successfully!');
            } catch (err) {
                console.error('Compression error', err);
                showMessage('Compression failed. For very large PDFs this can fail due to browser memory limits.', true);
                setStatus('Compression failed');
            } finally {
                compressBtn.disabled = false;
                previewBtn.disabled = false;
                clearBtn.disabled = false;
            }
        });

        clearBtn.addEventListener('click', () => {
            pdfFileInput.value = '';
            originalFile = null;
            compressedPdfBytes = null;
            setStatus('Cleared');
            setProgress(0);
            canvasPreview.innerHTML = `
                <div class="preview-info">
                    <i class="fas fa-file-pdf" style="font-size: 48px; margin-bottom: 10px; opacity: 0.5;"></i>
                    <p>Preview will appear here</p>
                </div>
            `;
            resultPanel.classList.remove('active');
            pageInfo.textContent = 'No file loaded';
            
            // Reset file upload label
            fileUploadLabel.innerHTML = `
                <i class="fas fa-file-pdf"></i>
                <h3>Select PDF File</h3>
                <p>Click to browse or drag and drop your PDF file here</p>
            `;
            
            showMessage('All fields cleared');
        });

        // Initial state
        setStatus('No file uploaded');
        setProgress(0);
    </script>
</body>
</html>
